import{I as Y,r as i,L as z,o as Z,Q as ee,c as n,e as u,j as I,t as h,F as A,i as E,s as N,d as l,S as te,p as L}from"./vue-vendor-DpVgmi3Y.js";import{_ as se}from"./index-U1VtMyGM.js";import"./primevue-B_xtssf4.js";const ae={class:"min-h-screen min-w-screen fixed inset-0 z-0 bg-gradient-to-br from-gray-300 via-gray-200 to-gray-400 flex items-center justify-center"},ne={class:"control-panel flex justify-between items-center mb-4"},le={class:"text-xl font-bold text-red-600 digital-counter"},oe={key:0},ie={key:1},re={key:2},ue={class:"text-xl font-bold text-red-600 digital-counter"},ve={class:"mb-2 flex justify-center space-x-2"},ce=["onClick"],de={class:"mb-2 flex justify-center space-x-2"},fe={key:0,class:"text-xs text-gray-700"},me={key:1,class:"text-xs text-gray-700"},ge={class:"board-wrapper overflow-x-auto"},pe=["onClick","onContextmenu"],he={key:0,class:"text-xl"},xe={key:1,class:L("text-xl")},_e={key:1,class:"text-xl"},we={key:0,class:"mt-4 text-center"},be={key:0,class:"text-2xl font-bold text-green-600"},ye={key:1,class:"text-2xl font-bold text-red-600"},Me=Y({__name:"MinesWeeper",setup(ke){const R={"8x8":{rows:8,cols:8,mines:10},"16x16":{rows:16,cols:16,mines:40},"24x24":{rows:24,cols:24,mines:99},"24x32":{rows:32,cols:24,mines:150}},O={"8x8":"8x8","16x16":"16x16","24x24":"24x24","24x32":"24x32"},a=i([]),x=i(8),c=i(8),m=i(10),f=i(10),v=i(!1),_=i(!1),y=i(0),p=i("8x8"),w=i(!0),r=i(null),j=i(window.innerHeight),d=i({}),$=z(()=>({display:"grid",gridTemplateColumns:`repeat(${c.value}, 25px)`,gap:"0",borderTop:"1px solid #808080",borderLeft:"1px solid #808080",borderRight:"1px solid #fff",borderBottom:"1px solid #fff"})),T=z(()=>window.innerWidth<640?{width:"100vw",minWidth:"0",maxWidth:"100vw",borderRadius:0}:{minWidth:"auto",maxWidth:"unset",borderRadius:"8px"}),B=()=>{j.value=window.innerHeight},F=()=>{const e=localStorage.getItem("minesweeper_best_revealed");if(e)try{d.value=JSON.parse(e)}catch{d.value={}}},G=()=>{localStorage.setItem("minesweeper_best_revealed",JSON.stringify(d.value))};Z(()=>{F(),M("8x8"),window.addEventListener("resize",B)}),ee(()=>{r.value&&clearInterval(r.value),window.removeEventListener("resize",B)});const M=e=>{p.value=e;const s=R[e];x.value=s.rows,c.value=s.cols,m.value=s.mines,v.value=!1,_.value=!1,y.value=0,w.value=!0,f.value=s.mines,r.value&&clearInterval(r.value),H()},H=()=>{a.value=[];for(let e=0;e<x.value*c.value;e++)a.value.push({isMine:!1,revealed:!1,flagged:!1,minesAround:0})},k=e=>{const s=[],t=Math.floor(e/c.value),o=e%c.value;for(let g=-1;g<=1;g++)for(let b=-1;b<=1;b++){if(g===0&&b===0)continue;const S=t+g,C=o+b,X=S*c.value+C;S>=0&&S<x.value&&C>=0&&C<c.value&&s.push(X)}return s},D=e=>{let s=0;const t=k(e).concat(e);for(;s<m.value;){const o=Math.floor(Math.random()*a.value.length);!a.value[o].isMine&&!t.includes(o)&&(a.value[o].isMine=!0,s++)}J()},J=()=>{for(let e=0;e<a.value.length;e++)if(!a.value[e].isMine){let s=0;k(e).forEach(o=>{a.value[o]&&a.value[o].isMine&&s++}),a.value[e].minesAround=s}},U=()=>{const e=p.value,s=a.value.filter(t=>t.revealed&&!t.isMine).length;!v.value&&!w.value&&(d.value[e]===void 0||s>d.value[e])&&(d.value[e]=s,G())},W=e=>{if(!(v.value||a.value[e].revealed||a.value[e].flagged)){if(w.value&&(D(e),q(),w.value=!1),a.value[e].revealed=!0,a.value[e].isMine){v.value=!0,P(),r.value&&clearInterval(r.value);return}a.value[e].minesAround===0&&k(e).forEach(t=>{setTimeout(()=>W(t),10)}),U(),Q()}},V=e=>{v.value||a.value[e].revealed||(a.value[e].flagged=!a.value[e].flagged,f.value=m.value-a.value.filter(s=>s.flagged).length,f.value<0&&(f.value=0),f.value>m.value&&(f.value=m.value))},P=()=>{a.value.forEach(e=>{e.isMine&&(e.revealed=!0)})},Q=()=>{const e=a.value.filter(t=>t.revealed&&!t.isMine).length,s=x.value*c.value-m.value;e===s&&(v.value=!0,_.value=!0,r.value&&clearInterval(r.value),a.value.forEach(t=>{t.isMine&&!t.flagged&&(t.flagged=!0)}))},q=()=>{r.value&&clearInterval(r.value),r.value=setInterval(()=>{v.value||y.value++},1e3)},K=e=>["minesweeper-cell",{revealed:e.revealed,mine:e.revealed&&e.isMine,flagged:e.flagged&&!e.revealed},e.revealed&&e.minesAround>0&&!e.isMine?`number-${e.minesAround}`:""];return(e,s)=>(l(),n("div",ae,[u("div",{class:"app-container shadow-2xl relative z-10",style:N(T.value)},[s[1]||(s[1]=u("h1",{class:"text-xl font-bold mb-4 text-center",style:{"font-family":"'MS Sans Serif', 'Arial', sans-serif"}}," BUSCAMINAS ",-1)),u("div",ne,[u("div",le,h(String(f.value).padStart(3,"0")),1),u("button",{onClick:s[0]||(s[0]=t=>M(p.value)),class:"face-button"},[_.value?(l(),n("span",oe,"ðŸ˜Ž")):v.value?(l(),n("span",ie,"ðŸ˜µ")):(l(),n("span",re,"ðŸ™‚"))]),u("div",ue,h(String(y.value).padStart(3,"0")),1)]),u("div",ve,[(l(!0),n(A,null,E(Object.keys(R),t=>(l(),n("button",{key:t,onClick:o=>M(t),class:"difficulty-button"},h(O[t]),9,ce))),128))]),u("div",de,[d.value[p.value]!==void 0?(l(),n("span",fe,"RÃ©cord: "+h(d.value[p.value])+" cuadros",1)):(l(),n("span",me,"Sin rÃ©cord"))]),u("div",ge,[u("div",{class:"minesweeper-grid",style:N($.value)},[(l(!0),n(A,null,E(a.value,(t,o)=>(l(),n("div",{key:o,class:L(K(t)),onClick:g=>W(o),onContextmenu:te(g=>V(o),["prevent"])},[t.revealed?(l(),n(A,{key:0},[t.isMine?(l(),n("span",he,"ðŸ’£")):t.minesAround>0?(l(),n("span",xe,h(t.minesAround),1)):I("",!0)],64)):t.flagged?(l(),n("span",_e,"ðŸš©")):I("",!0)],42,pe))),128))],4)]),v.value?(l(),n("div",we,[_.value?(l(),n("p",be,"Â¡Ganaste!")):(l(),n("p",ye,"Â¡Game Over!"))])):I("",!0)],4)]))}}),Ae=se(Me,[["__scopeId","data-v-e12d56ad"]]);export{Ae as default};
