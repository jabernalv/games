import{I as $,r as _,o as ee,n as te,Q as ne,c as U,e as i,j as oe,t as A,S as k,d as V}from"./vue-vendor-DpVgmi3Y.js";const ie={class:"min-h-screen min-w-screen fixed inset-0 z-0 bg-gradient-to-br from-[#222] via-[#444] to-[#222] flex items-center justify-center"},le={class:"spaceinvaders-container relative z-10"},se={class:"info-panel"},ae={class:"controls"},re={key:0,class:"game-over"},ce={class:"game-over-content"},a=480,R=320,r=30,C=20,W=5,fe=5,ue=10,c=3,f=6,g=20,b=15,X=10,ve=30,de=30,ye=10,he=$({__name:"SpaceInvaders",setup(me){const y=R-C-10,P=_(null),w=_(0),x=_(3),u=_(!1);let s=a/2-r/2,m=!1,p=!1,l=[],o=[],S=1,L=1,v=null;function M(){o=[];for(let e=0;e<f;e++){o[e]=[];for(let t=0;t<c;t++){const n=e*(g+X)+de,h=t*(b+X)+ve;o[e][t]={x:n,y:h,visible:!0}}}}function T(){const e=P.value?.getContext("2d");if(e){e.clearRect(0,0,a,R),e.fillStyle="#000",e.fillRect(0,0,a,R),e.fillStyle="lime",e.fillRect(s,y,r,C);for(const t of l)e.beginPath(),e.arc(t.x,t.y,fe,0,Math.PI*2),e.fillStyle="yellow",e.fill(),e.closePath();for(let t=0;t<f;t++)for(let n=0;n<c;n++)o[t][n].visible&&(e.fillStyle="red",e.fillRect(o[t][n].x,o[t][n].y,g,b))}}function Y(){m&&s>0&&(s-=W),p&&s<a-r&&(s+=W)}function G(){for(let e=0;e<l.length;e++)l[e].y-=ue,l[e].y<0&&(l.splice(e,1),e--)}function J(){let e=!1;for(let t=0;t<f;t++)for(let n=0;n<c;n++)o[t][n].visible&&(o[t][n].x+=S*L,(o[t][n].x+g>a||o[t][n].x<0)&&(e=!0));if(e){L*=-1;for(let t=0;t<f;t++)for(let n=0;n<c;n++)o[t][n].visible&&(o[t][n].y+=ye)}}function K(){for(let e=0;e<l.length;e++){const t=l[e];for(let n=0;n<f;n++)for(let h=0;h<c;h++){const d=o[n][h];if(d.visible&&t.x>d.x&&t.x<d.x+g&&t.y>d.y&&t.y<d.y+b){d.visible=!1,l.splice(e,1),e--,w.value+=10;return}}}for(let e=0;e<f;e++)for(let t=0;t<c;t++){const n=o[e][t];if(n.visible&&n.x<s+r&&n.x+g>s&&n.y<y+C&&n.y+b>y){E();return}}for(let e=0;e<f;e++)for(let t=0;t<c;t++){const n=o[e][t];if(n.visible&&n.y+b>=y){E();return}}}function E(){x.value--,x.value<=0?(u.value=!0,O()):Q()}function Q(){s=a/2-r/2,l=[]}function B(){u.value||l.length<1&&l.push({x:s+r/2,y})}function F(){m=!0}function I(){m=!1}function j(){p=!0}function D(){p=!1}function q(e){u.value||(e.key==="ArrowLeft"?m=!0:e.key==="ArrowRight"?p=!0:(e.key===" "||e.key==="ArrowUp")&&B())}function z(e){e.key==="ArrowLeft"?m=!1:e.key==="ArrowRight"&&(p=!1)}function H(){u.value||(Y(),G(),J(),K(),T(),o.flat().every(e=>!e.visible)&&(M(),S+=.5),v=requestAnimationFrame(H))}function N(){w.value=0,x.value=3,u.value=!1,s=a/2-r/2,l=[],S=1,L=1,M(),T(),v&&cancelAnimationFrame(v),v=requestAnimationFrame(H)}function O(){v&&cancelAnimationFrame(v)}function Z(){N()}return ee(()=>{te(()=>{N(),window.addEventListener("keydown",q),window.addEventListener("keyup",z)})}),ne(()=>{O(),window.removeEventListener("keydown",q),window.removeEventListener("keyup",z)}),(e,t)=>(V(),U("div",ie,[i("div",le,[i("canvas",{ref_key:"gameCanvas",ref:P,width:"480",height:"320"},null,512),i("div",se,[i("span",null,"Puntaje: "+A(w.value),1),i("span",null,"Vidas: "+A(x.value),1)]),i("div",ae,[i("button",{class:"button",onMousedown:F,onMouseup:I,onTouchstart:k(F,["prevent"]),onTouchend:k(I,["prevent"])}," Izquierda ",32),i("button",{class:"button",onClick:B},"Disparar"),i("button",{class:"button",onMousedown:j,onMouseup:D,onTouchstart:k(j,["prevent"]),onTouchend:k(D,["prevent"])}," Derecha ",32)]),u.value?(V(),U("div",re,[i("div",ce,[t[0]||(t[0]=i("h2",null,"Â¡Juego Terminado!",-1)),i("p",null,"Puntaje Final: "+A(w.value),1),i("button",{class:"button",onClick:Z},"Jugar de Nuevo")])])):oe("",!0)])]))}});export{he as default};
