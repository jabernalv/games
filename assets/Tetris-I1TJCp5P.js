import{I as le,r,o as oe,n as ne,Q as ae,c as Z,e as l,j as se,t as P,d as K}from"./vue-vendor-DpVgmi3Y.js";import{_ as re}from"./index-BaCyPx3r.js";import"./primevue-B_xtssf4.js";const ue={class:"min-h-screen min-w-screen fixed inset-0 z-0 bg-gradient-to-br from-[#c0c0c0] via-[#e0e0e0] to-[#c0c0c0] flex items-center justify-center"},ie={class:"game-container relative z-10"},ce={class:"game-header"},fe={class:"game-info"},ve={class:"game-area"},de={class:"main-board"},he={class:"side-panel"},pe={class:"next-piece"},me={key:0,class:"game-over"},ye={class:"game-over-content"},m=10,k=20,a=30,ge=le({__name:"Tetris",setup(_e){const R=m*a,S=k*a,w=r(0),d=r(1),b=r(0),i=r(!1),c=r(!1),f=r([]),n=r(null),h=r(null),x=r(1e3);let p=null;const I=r(null),M=r(null),j={I:{shape:[[1,1,1,1]],color:"#00f5ff"},O:{shape:[[1,1],[1,1]],color:"#ffff00"},T:{shape:[[0,1,0],[1,1,1]],color:"#800080"},S:{shape:[[0,1,1],[1,1,0]],color:"#00ff00"},Z:{shape:[[1,1,0],[0,1,1]],color:"#ff0000"},J:{shape:[[1,0,0],[1,1,1]],color:"#0000ff"},L:{shape:[[0,0,1],[1,1,1]],color:"#ffa500"}},D=Object.keys(j);function T(){const e=D[Math.floor(Math.random()*D.length)],t=j[e];return{shape:t.shape.map(o=>[...o]),color:t.color,x:Math.floor(m/2)-Math.floor(t.shape[0].length/2),y:0,type:e}}function Q(){f.value=Array.from({length:k},()=>Array(m).fill(0))}function y(){const e=I.value?.getContext("2d");if(e){e.clearRect(0,0,R,S),e.fillStyle="#222",e.fillRect(0,0,R,S);for(let t=0;t<k;t++)for(let o=0;o<m;o++)f.value[t][o]&&(e.fillStyle=f.value[t][o],e.fillRect(o*a,t*a,a,a),e.strokeStyle="#444",e.strokeRect(o*a,t*a,a,a));n.value&&q(e,n.value)}}function q(e,t){for(let o=0;o<t.shape.length;o++)for(let s=0;s<t.shape[o].length;s++)t.shape[o][s]&&(e.fillStyle=t.color,e.fillRect((t.x+s)*a,(t.y+o)*a,a,a),e.strokeStyle="#444",e.strokeRect((t.x+s)*a,(t.y+o)*a,a,a))}function E(){const e=M.value?.getContext("2d");if(!e||(e.clearRect(0,0,80,80),!h.value))return;const t=h.value.shape,o=Math.floor((4-t[0].length)/2),s=Math.floor((4-t.length)/2);for(let u=0;u<t.length;u++)for(let v=0;v<t[u].length;v++)t[u][v]&&(e.fillStyle=h.value.color,e.fillRect((v+o)*16,(u+s)*16,16,16),e.strokeStyle="#444",e.strokeRect((v+o)*16,(u+s)*16,16,16))}function g(e,t=0,o=0,s=null){const u=s||e.shape,v=e.x+t,te=e.y+o;for(let _=0;_<u.length;_++)for(let C=0;C<u[_].length;C++)if(u[_][C]){const B=v+C,A=te+_;if(B<0||B>=m||A>=k||A>=0&&f.value[A][B])return!0}return!1}function F(){for(let e=0;e<n.value.shape.length;e++)for(let t=0;t<n.value.shape[e].length;t++)if(n.value.shape[e][t]){const o=n.value.x+t,s=n.value.y+e;s>=0&&(f.value[s][o]=n.value.color)}}function $(){let e=0;for(let t=k-1;t>=0;t--)f.value[t].every(o=>o)&&(f.value.splice(t,1),f.value.unshift(Array(m).fill(0)),e++,t++);e>0&&(w.value+=[0,40,100,300,1200][e]*d.value,b.value+=e,b.value>=d.value*10&&(d.value++,x.value=Math.max(100,1e3-(d.value-1)*100)))}function O(){n.value=h.value||T(),h.value=T(),g(n.value)&&(i.value=!0,V())}function L(e,t){!n.value||i.value||c.value||g(n.value,e,t)||(n.value.x+=e,n.value.y+=t,y())}function Y(){L(-1,0)}function G(){L(1,0)}function H(){L(0,1)}function N(){if(!n.value||i.value||c.value)return;const e=n.value.shape[0].map((t,o)=>n.value.shape.map(s=>s[o])).reverse();g(n.value,0,0,e)||(n.value.shape=e,y())}function X(){if(!(!n.value||i.value||c.value)){for(;!g(n.value,0,1);)n.value.y++;z()}}function z(){!n.value||i.value||c.value||(g(n.value,0,1)?(F(),$(),O()):n.value.y++,y(),E())}function J(){i.value||c.value||(z(),p=window.setTimeout(J,x.value))}function U(){w.value=0,d.value=1,b.value=0,x.value=1e3,i.value=!1,c.value=!1,Q(),h.value=T(),O(),y(),E(),p&&clearTimeout(p),p=window.setTimeout(J,x.value)}function V(){p&&clearTimeout(p)}function ee(){U()}function W(e){i.value||(e.key==="ArrowLeft"?Y():e.key==="ArrowRight"?G():e.key==="ArrowDown"?H():e.key==="ArrowUp"?N():e.key===" "?X():e.key.toLowerCase()==="p"&&(c.value=!c.value))}return oe(()=>{ne(()=>{U(),window.addEventListener("keydown",W),y(),E()})}),ae(()=>{V(),window.removeEventListener("keydown",W)}),(e,t)=>(K(),Z("div",ue,[l("div",ie,[l("div",ce,[t[0]||(t[0]=l("h1",null,"Tetris",-1)),l("div",fe,[l("span",null,"Puntaje: "+P(w.value),1),l("span",null,"Nivel: "+P(d.value),1),l("span",null,"Líneas: "+P(b.value),1)])]),l("div",ve,[l("div",de,[l("canvas",{ref_key:"gameBoard",ref:I,width:R,height:S},null,512)]),l("div",he,[l("div",pe,[t[1]||(t[1]=l("h3",null,"Siguiente",-1)),l("canvas",{ref_key:"nextPieceCanvas",ref:M,width:"80",height:"80"},null,512)]),l("div",{class:"controls"},[t[2]||(t[2]=l("h3",null,"Controles",-1)),l("div",{class:"control-buttons"},[l("button",{class:"control-btn rotate-btn",onClick:N},"⟳"),l("button",{class:"control-btn left-btn",onClick:Y},"←"),l("button",{class:"control-btn down-btn",onClick:H},"↓"),l("button",{class:"control-btn right-btn",onClick:G},"→"),l("button",{class:"control-btn drop-btn",onClick:X},"⤓")]),t[3]||(t[3]=l("div",{class:"keyboard-controls"},[l("h4",null,"Teclado"),l("p",null,"← → : Mover"),l("p",null,"↑ : Rotar"),l("p",null,"↓ : Bajar"),l("p",null,"Espacio: Caída rápida"),l("p",null,"P : Pausa")],-1))])])]),i.value?(K(),Z("div",me,[l("div",ye,[t[4]||(t[4]=l("h2",null,"¡Game Over!",-1)),l("p",null,"Puntaje: "+P(w.value),1),l("button",{onClick:ee},"Jugar de nuevo")])])):se("",!0)])]))}}),xe=re(ge,[["__scopeId","data-v-d1e6073f"]]);export{xe as default};
