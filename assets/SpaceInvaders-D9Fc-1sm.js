import{I as ye,r as k,o as he,n as me,Q as ge,c as K,e as o,j as be,t as R,S as C,d as Q}from"./vue-vendor-WgFWCJB4.js";import{_ as we}from"./index-sVOIuwx2.js";import"./primevue-DvuJGXnf.js";const xe={class:"min-h-screen min-w-screen fixed inset-0 z-0 bg-gradient-to-br from-[#222] via-[#444] to-[#222] flex items-center justify-center"},_e={class:"spaceinvaders-container relative z-10"},Se={class:"info-panel"},ke={class:"controls"},Ae={key:0,class:"game-over"},Ie={class:"game-over-content"},y=600,P=400,u=30,M=20,Z=5,$=5,Be=10,v=4,d=8,A=24,I=18,ee=14,Le=40,Re=40,Ce=14,Pe=3,Me=ye({__name:"SpaceInvaders",setup(Te){const p=P-M-10,j=k(null),h=k(0),w=k(3),m=k(!1);let i=y/2-u/2,x=!1,_=!1,a=[],l=[],T=.7,F=1,c=null,B=0,g=null;const D=[[[0,1,0],[1,1,1],[1,1,1],[1,0,1],[0,1,0]],[[1,0,1],[1,1,1],[0,1,0],[1,1,1],[1,0,1]],[[1,1,1],[1,0,1],[1,1,1],[0,1,0],[1,1,1]],[[0,1,0],[1,0,1],[1,1,1],[1,0,1],[0,1,0]]],te=["#00eaff","#ff00c8","#ffe600","#00ff5e"],b=k(0),ne=()=>{const e=localStorage.getItem("spaceinvaders_best_score");if(e)try{b.value=parseInt(e)}catch{b.value=0}},le=()=>{localStorage.setItem("spaceinvaders_best_score",String(b.value))};function oe(){h.value>b.value&&(b.value=h.value,le())}let s=[],ie=90;function q(){l=[];for(let e=0;e<d;e++){l[e]=[];for(let t=0;t<v;t++){const n=e*(A+ee)+Re,f=t*(I+ee)+Le;l[e][t]={x:n,y:f,visible:!0,type:t%D.length}}}}function ae(e,t,n,f){const r=D[f];for(let S=0;S<r.length;S++)for(let L=0;L<r[S].length;L++)r[S][L]&&(e.fillStyle=te[f],e.fillRect(t+L*3,n+S*3,3,3))}function z(){const e=j.value?.getContext("2d");if(e){e.clearRect(0,0,y,P),e.fillStyle="#000",e.fillRect(0,0,y,P),e.fillStyle="lime",e.fillRect(i,p,u,M);for(const t of a)e.beginPath(),e.arc(t.x,t.y,$,0,Math.PI*2),e.fillStyle="yellow",e.fill(),e.closePath();for(const t of s)e.beginPath(),e.arc(t.x,t.y,$,0,Math.PI*2),e.fillStyle="white",e.fill(),e.closePath();for(let t=0;t<d;t++)for(let n=0;n<v;n++)l[t][n].visible&&ae(e,l[t][n].x,l[t][n].y,l[t][n].type)}}function se(){x&&i>0&&(i-=Z),_&&i<y-u&&(i+=Z)}function re(){for(let e=0;e<a.length;e++)a[e].y-=Be,a[e].y<0&&(a.splice(e,1),e--)}function ce(){let e=!1;for(let t=0;t<d;t++)for(let n=0;n<v;n++)l[t][n].visible&&(l[t][n].x+=T*F,(l[t][n].x+A>y||l[t][n].x<0)&&(e=!0));if(e){F*=-1;for(let t=0;t<d;t++)for(let n=0;n<v;n++)l[t][n].visible&&(l[t][n].y+=Ce)}}function fe(){for(let e=0;e<s.length;e++)s[e].y+=Pe,s[e].y>P&&(s.splice(e,1),e--)}function ue(){const e=[];for(let t=0;t<d;t++)for(let n=v-1;n>=0;n--)if(l[t][n].visible){e.push({x:l[t][n].x+A/2,y:l[t][n].y+I});break}if(e.length>0){const t=Math.floor(Math.random()*e.length);s.push({x:e[t].x,y:e[t].y})}}function ve(){for(let e=0;e<a.length;e++){const t=a[e];for(let n=0;n<d;n++)for(let f=0;f<v;f++){const r=l[n][f];if(r.visible&&t.x>r.x&&t.x<r.x+A&&t.y>r.y&&t.y<r.y+I){r.visible=!1,a.splice(e,1),e--,h.value+=10,oe();return}}}for(let e=0;e<d;e++)for(let t=0;t<v;t++){const n=l[e][t];if(n.visible&&n.x<i+u&&n.x+A>i&&n.y<p+M&&n.y+I>p){E();return}}for(let e=0;e<d;e++)for(let t=0;t<v;t++){const n=l[e][t];if(n.visible&&n.y+I>=p){E();return}}for(let e=0;e<s.length;e++){const t=s[e];if(t.x>i&&t.x<i+u&&t.y>p&&t.y<p+M){s.splice(e,1),e--,E();return}}}function E(){w.value--,w.value<=0?(m.value=!0,J()):de()}function de(){i=y/2-u/2,a=[]}function H(){m.value||a.length<1&&a.push({x:i+u/2,y:p})}function N(){x=!0}function O(){x=!1}function U(){_=!0}function V(){_=!1}function W(e){m.value||(e.key==="ArrowLeft"?x=!0:e.key==="ArrowRight"?_=!0:(e.key===" "||e.key==="ArrowUp")&&H())}function X(e){e.key==="ArrowLeft"?x=!1:e.key==="ArrowRight"&&(_=!1)}function Y(){m.value||(se(),re(),ce(),fe(),ve(),z(),c===null&&(c=window.setInterval(()=>{},300)),B++,B>=ie&&(ue(),B=0),l.flat().every(e=>!e.visible)&&(q(),T+=.5,w.value++),g=requestAnimationFrame(Y))}function G(){h.value=0,w.value=3,m.value=!1,i=y/2-u/2,a=[],s=[],T=.7,F=1,B=0,c&&clearInterval(c),c=null,q(),z(),g&&cancelAnimationFrame(g),g=requestAnimationFrame(Y)}function J(){g&&cancelAnimationFrame(g),c&&clearInterval(c),c=null}function pe(){G()}return he(()=>{me(()=>{ne(),G(),window.addEventListener("keydown",W),window.addEventListener("keyup",X)})}),ge(()=>{J(),window.removeEventListener("keydown",W),window.removeEventListener("keyup",X)}),(e,t)=>(Q(),K("div",xe,[o("div",_e,[o("canvas",{ref_key:"gameCanvas",ref:j,width:"600",height:"400"},null,512),o("div",Se,[o("span",null,"Puntaje: "+R(h.value),1),o("span",null,"Récord: "+R(b.value),1),o("span",null,"Vidas: "+R(w.value),1)]),o("div",ke,[o("button",{class:"button",onMousedown:N,onMouseup:O,onTouchstart:C(N,["prevent"]),onTouchend:C(O,["prevent"])}," Izquierda ",32),o("button",{class:"button",onClick:H},"Disparar"),o("button",{class:"button",onMousedown:U,onMouseup:V,onTouchstart:C(U,["prevent"]),onTouchend:C(V,["prevent"])}," Derecha ",32)]),m.value?(Q(),K("div",Ae,[o("div",Ie,[t[0]||(t[0]=o("h2",null,"¡Juego Terminado!",-1)),o("p",null,"Puntaje Final: "+R(h.value),1),o("button",{class:"button",onClick:pe},"Jugar de Nuevo")])])):be("",!0)])]))}}),De=we(Me,[["__scopeId","data-v-1438f0a9"]]);export{De as default};
