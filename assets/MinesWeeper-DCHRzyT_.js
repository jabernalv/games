import{I as se,r as i,O as W,o as ae,Q as le,c as l,e as v,j as B,t as h,F as R,i as j,s as z,d as n,S as ne,p as E}from"./vue-vendor-WgFWCJB4.js";import{_ as oe}from"./index-sVOIuwx2.js";import"./primevue-DvuJGXnf.js";const ie={class:"min-h-screen min-w-screen fixed inset-0 z-0 bg-gradient-to-br from-gray-300 via-gray-200 to-gray-400 flex items-center justify-center"},re={class:"control-panel flex justify-between items-center mb-4"},ue={class:"text-xl font-bold text-red-600 digital-counter"},ve={key:0},ce={key:1},de={key:2},fe={class:"text-xl font-bold text-red-600 digital-counter"},me={class:"mb-2 flex justify-center space-x-2"},ge=["onClick"],pe={class:"mb-2 flex justify-center space-x-2"},_e={key:0,class:"text-xs text-gray-700"},xe={key:1,class:"text-xs text-gray-700"},he={class:"mb-2 flex justify-center space-x-2"},be={key:0,class:"text-xs text-gray-700"},ye={key:1,class:"text-xs text-gray-700"},we={class:"board-wrapper overflow-x-auto"},Me=["onClick","onContextmenu"],Se={key:0,class:"text-xl"},ke={key:1,class:E("text-xl")},Ce={key:1,class:"text-xl"},Ie={key:0,class:"mt-4 text-center"},Ae={key:0,class:"text-2xl font-bold text-green-600"},Be={key:1,class:"text-2xl font-bold text-red-600"},Re=se({__name:"MinesWeeper",setup(Ne){const S={"8x8":{rows:8,cols:8,label:"8x8"},"16x16":{rows:16,cols:16,label:"16x16"},"16x24":{rows:16,cols:24,label:"16x24"},"16x32":{rows:16,cols:32,label:"16x32"},"16x40":{rows:16,cols:40,label:"16x40"}},a=i([]),c=i(8),o=i(8),g=i(10),p=i(10),d=i(!1),b=i(!1),y=i(0),N=i("8x8"),w=i(!0),u=i(null),$=i(window.innerHeight),f=i({}),m=i({}),L=W(()=>({display:"grid",gridTemplateColumns:`repeat(${o.value}, 25px)`,gap:"0",borderTop:"1px solid #808080",borderLeft:"1px solid #808080",borderRight:"1px solid #fff",borderBottom:"1px solid #fff"})),J=W(()=>window.innerWidth<640?{width:"100vw",minWidth:"0",maxWidth:"100vw",borderRadius:0}:{minWidth:"auto",maxWidth:"unset",borderRadius:"8px"}),O=()=>{$.value=window.innerHeight},F=()=>{const e=localStorage.getItem("minesweeper_best_revealed");if(e)try{f.value=JSON.parse(e)}catch{f.value={}}},H=()=>{localStorage.setItem("minesweeper_best_revealed",JSON.stringify(f.value))},K=()=>{const e=localStorage.getItem("minesweeper_best_times");if(e)try{m.value=JSON.parse(e)}catch{m.value={}}},D=()=>{localStorage.setItem("minesweeper_best_times",JSON.stringify(m.value))},_=(e,t)=>`${e}x${t}`;ae(()=>{F(),K(),k("8x8"),window.addEventListener("resize",O)}),le(()=>{u.value&&clearInterval(u.value),window.removeEventListener("resize",O)});const k=e=>{N.value=e;const t=S[e];c.value=t.rows,o.value=t.cols,g.value=Math.round(t.rows*t.cols*.2),d.value=!1,b.value=!1,y.value=0,w.value=!0,p.value=g.value,u.value&&clearInterval(u.value),G()},G=()=>{a.value=[];for(let e=0;e<c.value*o.value;e++)a.value.push({isMine:!1,revealed:!1,flagged:!1,minesAround:0})},C=e=>{const t=[],s=Math.floor(e/o.value),r=e%o.value;for(let x=-1;x<=1;x++)for(let M=-1;M<=1;M++){if(x===0&&M===0)continue;const I=s+x,A=r+M,te=I*o.value+A;I>=0&&I<c.value&&A>=0&&A<o.value&&t.push(te)}return t},U=e=>{let t=0;const s=C(e).concat(e);for(;t<g.value;){const r=Math.floor(Math.random()*a.value.length);!a.value[r].isMine&&!s.includes(r)&&(a.value[r].isMine=!0,t++)}V()},V=()=>{for(let e=0;e<a.value.length;e++)if(!a.value[e].isMine){let t=0;C(e).forEach(r=>{a.value[r]&&a.value[r].isMine&&t++}),a.value[e].minesAround=t}},P=()=>{const e=_(c.value,o.value),t=a.value.filter(s=>s.revealed&&!s.isMine).length;!d.value&&!w.value&&(f.value[e]===void 0||t>f.value[e])&&(f.value[e]=t,H())},Q=()=>{if(b.value){const e=_(c.value,o.value);(m.value[e]===void 0||y.value<m.value[e])&&(m.value[e]=y.value,D())}},T=e=>{if(!(d.value||a.value[e].revealed||a.value[e].flagged)){if(w.value&&(U(e),Z(),w.value=!1),a.value[e].revealed=!0,a.value[e].isMine){d.value=!0,X(),u.value&&clearInterval(u.value);return}a.value[e].minesAround===0&&C(e).forEach(s=>{setTimeout(()=>T(s),10)}),P(),Y()}},q=e=>{d.value||a.value[e].revealed||(a.value[e].flagged=!a.value[e].flagged,p.value=g.value-a.value.filter(t=>t.flagged).length,p.value<0&&(p.value=0),p.value>g.value&&(p.value=g.value))},X=()=>{a.value.forEach(e=>{e.isMine&&(e.revealed=!0)})},Y=()=>{const e=a.value.filter(s=>s.revealed&&!s.isMine).length,t=c.value*o.value-g.value;e===t&&(d.value=!0,b.value=!0,u.value&&clearInterval(u.value),a.value.forEach(s=>{s.isMine&&!s.flagged&&(s.flagged=!0)}),Q())},Z=()=>{u.value&&clearInterval(u.value),u.value=setInterval(()=>{d.value||y.value++},1e3)},ee=e=>["minesweeper-cell",{revealed:e.revealed,mine:e.revealed&&e.isMine,flagged:e.flagged&&!e.revealed},e.revealed&&e.minesAround>0&&!e.isMine?`number-${e.minesAround}`:""];return(e,t)=>(n(),l("div",ie,[v("div",{class:"app-container shadow-2xl relative z-10",style:z(J.value)},[t[1]||(t[1]=v("h1",{class:"text-xl font-bold mb-4 text-center",style:{"font-family":"'MS Sans Serif', 'Arial', sans-serif"}}," BUSCAMINAS ",-1)),v("div",re,[v("div",ue,h(String(p.value).padStart(3,"0")),1),v("button",{onClick:t[0]||(t[0]=s=>k(N.value)),class:"face-button"},[b.value?(n(),l("span",ve,"ðŸ˜Ž")):d.value?(n(),l("span",ce,"ðŸ˜µ")):(n(),l("span",de,"ðŸ™‚"))]),v("div",fe,h(String(y.value).padStart(3,"0")),1)]),v("div",me,[(n(!0),l(R,null,j(Object.keys(S),s=>(n(),l("button",{key:s,onClick:r=>k(s),class:"difficulty-button"},h(S[s].label),9,ge))),128))]),v("div",pe,[f.value[_(c.value,o.value)]!==void 0?(n(),l("span",_e,"RÃ©cord: "+h(f.value[_(c.value,o.value)])+" cuadros",1)):(n(),l("span",xe,"Sin rÃ©cord"))]),v("div",he,[m.value[_(c.value,o.value)]!==void 0?(n(),l("span",be,"Mejor tiempo: "+h(m.value[_(c.value,o.value)])+"s",1)):(n(),l("span",ye,"Sin tiempo rÃ©cord"))]),v("div",we,[v("div",{class:"minesweeper-grid",style:z(L.value)},[(n(!0),l(R,null,j(a.value,(s,r)=>(n(),l("div",{key:r,class:E(ee(s)),onClick:x=>T(r),onContextmenu:ne(x=>q(r),["prevent"])},[s.revealed?(n(),l(R,{key:0},[s.isMine?(n(),l("span",Se,"ðŸ’£")):s.minesAround>0?(n(),l("span",ke,h(s.minesAround),1)):B("",!0)],64)):s.flagged?(n(),l("span",Ce,"ðŸš©")):B("",!0)],42,Me))),128))],4)]),d.value?(n(),l("div",Ie,[b.value?(n(),l("p",Ae,"Â¡Ganaste!")):(n(),l("p",Be,"Â¡Terminado sin ganar!"))])):B("",!0)],4)]))}}),je=oe(Re,[["__scopeId","data-v-d99319b8"]]);export{je as default};
