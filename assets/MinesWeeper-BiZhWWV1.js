import{I as X,r,L as z,o as Y,Q as Z,c as n,e as u,j as A,t as h,F as R,i as E,s as N,d as l,S as ee,p as j}from"./vue-vendor-DpVgmi3Y.js";import{_ as te}from"./index-DZAkzipv.js";import"./primevue-B_xtssf4.js";const ae={class:"min-h-screen min-w-screen fixed inset-0 z-0 bg-gradient-to-br from-gray-300 via-gray-200 to-gray-400 flex items-center justify-center"},se={class:"control-panel flex justify-between items-center mb-4"},ne={class:"text-xl font-bold text-red-600 digital-counter"},le={key:0},oe={key:1},re={key:2},ie={class:"text-xl font-bold text-red-600 digital-counter"},ue={class:"mb-2 flex justify-center space-x-2"},ve=["onClick"],ce={class:"mb-2 flex justify-center space-x-2"},de={key:0,class:"text-xs text-gray-700"},fe={key:1,class:"text-xs text-gray-700"},ge={class:"board-wrapper overflow-x-auto"},me=["onClick","onContextmenu"],pe={key:0,class:"text-xl"},he={key:1,class:j("text-xl")},_e={key:1,class:"text-xl"},xe={key:0,class:"mt-4 text-center"},be={key:0,class:"text-2xl font-bold text-green-600"},we={key:1,class:"text-2xl font-bold text-red-600"},ye=X({__name:"MinesWeeper",setup(Me){const y={"8x8":{rows:8,cols:8,label:"8x8"},"16x16":{rows:16,cols:16,label:"16x16"},"24x24":{rows:16,cols:24,label:"16x24"},"24x32":{rows:16,cols:32,label:"16x32"}},s=r([]),_=r(8),c=r(8),f=r(10),g=r(10),v=r(!1),x=r(!1),M=r(0),p=r("8x8"),b=r(!0),i=r(null),L=r(window.innerHeight),d=r({}),O=z(()=>({display:"grid",gridTemplateColumns:`repeat(${c.value}, 25px)`,gap:"0",borderTop:"1px solid #808080",borderLeft:"1px solid #808080",borderRight:"1px solid #fff",borderBottom:"1px solid #fff"})),$=z(()=>window.innerWidth<640?{width:"100vw",minWidth:"0",maxWidth:"100vw",borderRadius:0}:{minWidth:"auto",maxWidth:"unset",borderRadius:"8px"}),B=()=>{L.value=window.innerHeight},T=()=>{const e=localStorage.getItem("minesweeper_best_revealed");if(e)try{d.value=JSON.parse(e)}catch{d.value={}}},F=()=>{localStorage.setItem("minesweeper_best_revealed",JSON.stringify(d.value))};Y(()=>{T(),k("8x8"),window.addEventListener("resize",B)}),Z(()=>{i.value&&clearInterval(i.value),window.removeEventListener("resize",B)});const k=e=>{p.value=e;const a=y[e];_.value=a.rows,c.value=a.cols,f.value=Math.round(a.rows*a.cols*.17),v.value=!1,x.value=!1,M.value=0,b.value=!0,g.value=f.value,i.value&&clearInterval(i.value),H()},H=()=>{s.value=[];for(let e=0;e<_.value*c.value;e++)s.value.push({isMine:!1,revealed:!1,flagged:!1,minesAround:0})},S=e=>{const a=[],t=Math.floor(e/c.value),o=e%c.value;for(let m=-1;m<=1;m++)for(let w=-1;w<=1;w++){if(m===0&&w===0)continue;const C=t+m,I=o+w,K=C*c.value+I;C>=0&&C<_.value&&I>=0&&I<c.value&&a.push(K)}return a},D=e=>{let a=0;const t=S(e).concat(e);for(;a<f.value;){const o=Math.floor(Math.random()*s.value.length);!s.value[o].isMine&&!t.includes(o)&&(s.value[o].isMine=!0,a++)}G()},G=()=>{for(let e=0;e<s.value.length;e++)if(!s.value[e].isMine){let a=0;S(e).forEach(o=>{s.value[o]&&s.value[o].isMine&&a++}),s.value[e].minesAround=a}},J=()=>{const e=p.value,a=s.value.filter(t=>t.revealed&&!t.isMine).length;!v.value&&!b.value&&(d.value[e]===void 0||a>d.value[e])&&(d.value[e]=a,F())},W=e=>{if(!(v.value||s.value[e].revealed||s.value[e].flagged)){if(b.value&&(D(e),Q(),b.value=!1),s.value[e].revealed=!0,s.value[e].isMine){v.value=!0,V(),i.value&&clearInterval(i.value);return}s.value[e].minesAround===0&&S(e).forEach(t=>{setTimeout(()=>W(t),10)}),J(),P()}},U=e=>{v.value||s.value[e].revealed||(s.value[e].flagged=!s.value[e].flagged,g.value=f.value-s.value.filter(a=>a.flagged).length,g.value<0&&(g.value=0),g.value>f.value&&(g.value=f.value))},V=()=>{s.value.forEach(e=>{e.isMine&&(e.revealed=!0)})},P=()=>{const e=s.value.filter(t=>t.revealed&&!t.isMine).length,a=_.value*c.value-f.value;e===a&&(v.value=!0,x.value=!0,i.value&&clearInterval(i.value),s.value.forEach(t=>{t.isMine&&!t.flagged&&(t.flagged=!0)}))},Q=()=>{i.value&&clearInterval(i.value),i.value=setInterval(()=>{v.value||M.value++},1e3)},q=e=>["minesweeper-cell",{revealed:e.revealed,mine:e.revealed&&e.isMine,flagged:e.flagged&&!e.revealed},e.revealed&&e.minesAround>0&&!e.isMine?`number-${e.minesAround}`:""];return(e,a)=>(l(),n("div",ae,[u("div",{class:"app-container shadow-2xl relative z-10",style:N($.value)},[a[1]||(a[1]=u("h1",{class:"text-xl font-bold mb-4 text-center",style:{"font-family":"'MS Sans Serif', 'Arial', sans-serif"}}," BUSCAMINAS ",-1)),u("div",se,[u("div",ne,h(String(g.value).padStart(3,"0")),1),u("button",{onClick:a[0]||(a[0]=t=>k(p.value)),class:"face-button"},[x.value?(l(),n("span",le,"ðŸ˜Ž")):v.value?(l(),n("span",oe,"ðŸ˜µ")):(l(),n("span",re,"ðŸ™‚"))]),u("div",ie,h(String(M.value).padStart(3,"0")),1)]),u("div",ue,[(l(!0),n(R,null,E(Object.keys(y),t=>(l(),n("button",{key:t,onClick:o=>k(t),class:"difficulty-button"},h(y[t].label),9,ve))),128))]),u("div",ce,[d.value[p.value]!==void 0?(l(),n("span",de,"RÃ©cord: "+h(d.value[p.value])+" cuadros",1)):(l(),n("span",fe,"Sin rÃ©cord"))]),u("div",ge,[u("div",{class:"minesweeper-grid",style:N(O.value)},[(l(!0),n(R,null,E(s.value,(t,o)=>(l(),n("div",{key:o,class:j(q(t)),onClick:m=>W(o),onContextmenu:ee(m=>U(o),["prevent"])},[t.revealed?(l(),n(R,{key:0},[t.isMine?(l(),n("span",pe,"ðŸ’£")):t.minesAround>0?(l(),n("span",he,h(t.minesAround),1)):A("",!0)],64)):t.flagged?(l(),n("span",_e,"ðŸš©")):A("",!0)],42,me))),128))],4)]),v.value?(l(),n("div",xe,[x.value?(l(),n("p",be,"Â¡Ganaste!")):(l(),n("p",we,"Â¡Terminado sin ganar!"))])):A("",!0)],4)]))}}),Ie=te(ye,[["__scopeId","data-v-a10c605d"]]);export{Ie as default};
