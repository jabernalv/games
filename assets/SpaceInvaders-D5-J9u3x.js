import{I as ce,r as L,o as fe,n as ue,Q as ve,c as G,e as i,j as de,t as T,S as P,d as J}from"./vue-vendor-DpVgmi3Y.js";import{_ as me}from"./index-BaCyPx3r.js";import"./primevue-B_xtssf4.js";const ye={class:"min-h-screen min-w-screen fixed inset-0 z-0 bg-gradient-to-br from-[#222] via-[#444] to-[#222] flex items-center justify-center"},pe={class:"spaceinvaders-container relative z-10"},he={class:"info-panel"},ge={class:"controls"},be={key:0,class:"game-over"},xe={class:"game-over-content"},y=480,R=320,u=30,C=20,K=5,Q=5,we=10,v=3,d=6,w=20,_=15,Z=10,_e=30,ke=30,Se=10,Ae=4,Ie=60,Le=ce({__name:"SpaceInvaders",setup(Pe){const m=R-C-10,E=L(null),k=L(0),g=L(3),p=L(!1);let o=y/2-u/2,b=!1,x=!1,a=[],l=[],M=1,B=1,h=null;const $=[[[0,1,0],[1,1,1],[1,1,1],[1,0,1],[0,1,0]],[[0,1,0],[1,1,1],[1,1,1],[0,1,0],[1,0,1]]];let S=0,f=null,r=[],A=0;function j(){l=[];for(let e=0;e<d;e++){l[e]=[];for(let t=0;t<v;t++){const n=e*(w+Z)+ke,c=t*(_+Z)+_e;l[e][t]={x:n,y:c,visible:!0}}}}function ee(e,t,n){const c=$[S];for(let s=0;s<c.length;s++)for(let I=0;I<c[s].length;I++)c[s][I]&&(e.fillStyle="red",e.fillRect(t+I*3,n+s*3,3,3))}function D(){const e=E.value?.getContext("2d");if(e){e.clearRect(0,0,y,R),e.fillStyle="#000",e.fillRect(0,0,y,R),e.fillStyle="lime",e.fillRect(o,m,u,C);for(const t of a)e.beginPath(),e.arc(t.x,t.y,Q,0,Math.PI*2),e.fillStyle="yellow",e.fill(),e.closePath();for(const t of r)e.beginPath(),e.arc(t.x,t.y,Q,0,Math.PI*2),e.fillStyle="white",e.fill(),e.closePath();for(let t=0;t<d;t++)for(let n=0;n<v;n++)l[t][n].visible&&ee(e,l[t][n].x,l[t][n].y)}}function te(){b&&o>0&&(o-=K),x&&o<y-u&&(o+=K)}function ne(){for(let e=0;e<a.length;e++)a[e].y-=we,a[e].y<0&&(a.splice(e,1),e--)}function le(){let e=!1;for(let t=0;t<d;t++)for(let n=0;n<v;n++)l[t][n].visible&&(l[t][n].x+=M*B,(l[t][n].x+w>y||l[t][n].x<0)&&(e=!0));if(e){B*=-1;for(let t=0;t<d;t++)for(let n=0;n<v;n++)l[t][n].visible&&(l[t][n].y+=Se)}}function ie(){for(let e=0;e<r.length;e++)r[e].y+=Ae,r[e].y>R&&(r.splice(e,1),e--)}function oe(){const e=[];for(let t=0;t<d;t++)for(let n=v-1;n>=0;n--)if(l[t][n].visible){e.push({x:l[t][n].x+w/2,y:l[t][n].y+_});break}if(e.length>0){const t=Math.floor(Math.random()*e.length);r.push({x:e[t].x,y:e[t].y})}}function ae(){for(let e=0;e<a.length;e++){const t=a[e];for(let n=0;n<d;n++)for(let c=0;c<v;c++){const s=l[n][c];if(s.visible&&t.x>s.x&&t.x<s.x+w&&t.y>s.y&&t.y<s.y+_){s.visible=!1,a.splice(e,1),e--,k.value+=10;return}}}for(let e=0;e<d;e++)for(let t=0;t<v;t++){const n=l[e][t];if(n.visible&&n.x<o+u&&n.x+w>o&&n.y<m+C&&n.y+_>m){F();return}}for(let e=0;e<d;e++)for(let t=0;t<v;t++){const n=l[e][t];if(n.visible&&n.y+_>=m){F();return}}for(let e=0;e<r.length;e++){const t=r[e];if(t.x>o&&t.x<o+u&&t.y>m&&t.y<m+C){r.splice(e,1),e--,F();return}}}function F(){g.value--,g.value<=0?(p.value=!0,Y()):se()}function se(){o=y/2-u/2,a=[]}function q(){p.value||a.length<1&&a.push({x:o+u/2,y:m})}function z(){b=!0}function H(){b=!1}function N(){x=!0}function O(){x=!1}function U(e){p.value||(e.key==="ArrowLeft"?b=!0:e.key==="ArrowRight"?x=!0:(e.key===" "||e.key==="ArrowUp")&&q())}function V(e){e.key==="ArrowLeft"?b=!1:e.key==="ArrowRight"&&(x=!1)}function W(){p.value||(te(),ne(),le(),ie(),ae(),D(),f===null&&(f=window.setInterval(()=>{S=(S+1)%2},300)),A++,A>=Ie&&(oe(),A=0),l.flat().every(e=>!e.visible)&&(j(),M+=.5,g.value++),h=requestAnimationFrame(W))}function X(){k.value=0,g.value=3,p.value=!1,o=y/2-u/2,a=[],r=[],M=1,B=1,S=0,A=0,f&&clearInterval(f),f=null,j(),D(),h&&cancelAnimationFrame(h),h=requestAnimationFrame(W)}function Y(){h&&cancelAnimationFrame(h),f&&clearInterval(f),f=null}function re(){X()}return fe(()=>{ue(()=>{X(),window.addEventListener("keydown",U),window.addEventListener("keyup",V)})}),ve(()=>{Y(),window.removeEventListener("keydown",U),window.removeEventListener("keyup",V)}),(e,t)=>(J(),G("div",ye,[i("div",pe,[i("canvas",{ref_key:"gameCanvas",ref:E,width:"480",height:"320"},null,512),i("div",he,[i("span",null,"Puntaje: "+T(k.value),1),i("span",null,"Vidas: "+T(g.value),1)]),i("div",ge,[i("button",{class:"button",onMousedown:z,onMouseup:H,onTouchstart:P(z,["prevent"]),onTouchend:P(H,["prevent"])}," Izquierda ",32),i("button",{class:"button",onClick:q},"Disparar"),i("button",{class:"button",onMousedown:N,onMouseup:O,onTouchstart:P(N,["prevent"]),onTouchend:P(O,["prevent"])}," Derecha ",32)]),p.value?(J(),G("div",be,[i("div",xe,[t[0]||(t[0]=i("h2",null,"Â¡Juego Terminado!",-1)),i("p",null,"Puntaje Final: "+T(k.value),1),i("button",{class:"button",onClick:re},"Jugar de Nuevo")])])):de("",!0)])]))}}),Be=me(Le,[["__scopeId","data-v-47678e2a"]]);export{Be as default};
